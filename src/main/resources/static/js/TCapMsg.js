window.TCapMsg=function(){function t(t,n){var e="";if(arguments.length<2?e="target error - target and name are both required":"object"!=typeof t?e="target error - target itself must be window object":"string"!=typeof n&&(e="target error - target name must be string type"),e)throw new Error(e);this.target=t,this.name=n}function n(t,n){this.targets={},this.name=t,this.listenFunc=[],e=n||e,"string"!=typeof e&&(e=e.toString()),this.initListen()}var e="[CODE_VERIFY]",i="postMessage"in window;return i?t.prototype.send=function(t){this.target.postMessage(t,"*")}:t.prototype.send=function(t){var n=window.navigator[e+this.name];if("function"!=typeof n)throw new Error("target callback function is not defined");n(t,window)},n.prototype.addTarget=function(n,e){var i=new t(n,e);this.targets[e]=i},n.prototype.initListen=function(){var t=this,n=function(n){"object"==typeof n&&n.data&&(n=n.data);for(var e=0;e<t.listenFunc.length;e++)t.listenFunc[e](n)};i?"addEventListener"in document?window.addEventListener("message",n,!1):"attachEvent"in document&&window.attachEvent("onmessage",n):window.navigator[e+this.name]=n},n.prototype.listen=function(t){this.listenFunc.push(t)},n.prototype.clear=function(){this.listenFunc=[]},n.prototype.send=function(t){var n,e=this.targets;for(n in e)e.hasOwnProperty(n)&&e[n].send(t)},n}();